<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fortune ÈªÑÂéÜ - Daily Fortune Calendar</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Inter:wght@300;400;500;600&family=Noto+Serif+SC:wght@400;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ===== CSS Variables - Modern Teal Theme ===== */
        :root {
            /* Primary - Deep Teal */
            --color-primary: #1D5C5C;
            --color-primary-light: #2A7A7A;
            --color-primary-dark: #0F3D3D;

            /* Accent - Deep Red */
            --color-accent: #A61911;
            --color-accent-light: #C83028;
            --color-accent-dark: #7A120D;

            /* Neutrals */
            --color-paper: #F8F4EC;
            --color-paper-dark: #EDE8DC;
            --color-ink: #1A1A1A;
            --color-ink-light: #4A4A4A;
            --color-ink-muted: #8A8A8A;

            /* Gold accent */
            --color-gold: #C9A962;

            /* Typography */
            --font-display: 'DM Serif Display', serif;
            --font-chinese: 'Noto Serif SC', serif;
            --font-english: 'Space Grotesk', sans-serif;
            --font-body: 'Inter', sans-serif;
        }

        /* ===== Base Styles ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            background: #E8E4DC;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: var(--color-ink);
        }

        .container {
            width: 100%;
            max-width: 380px;
        }

        /* Screen states */
        .screen {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .screen.active {
            display: block;
        }

        /* ===== Header ===== */
        .app-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .app-title {
            font-family: var(--font-chinese);
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--color-primary);
            letter-spacing: 0.15em;
        }

        .app-subtitle {
            font-family: var(--font-english);
            font-size: 0.65rem;
            color: var(--color-ink-muted);
            letter-spacing: 0.3em;
            text-transform: uppercase;
            margin-top: 0.25rem;
        }

        /* ===== Calendar Card Container ===== */
        .huangli-card {
            background: var(--color-paper);
            border-radius: 4px;
            box-shadow:
                0 8px 32px rgba(0,0,0,0.12),
                0 2px 8px rgba(0,0,0,0.08);
            position: relative;
            overflow: hidden;
        }

        /* Top accent bar */
        .huangli-topbar {
            background: var(--color-accent);
            padding: 0.625rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .topbar-left {
            font-family: var(--font-chinese);
            font-size: 0.8rem;
            color: white;
            letter-spacing: 0.1em;
        }

        .topbar-right {
            font-family: var(--font-english);
            font-size: 0.65rem;
            color: rgba(255,255,255,0.8);
            letter-spacing: 0.1em;
        }

        /* ===== Main Content Area ===== */
        .huangli-main {
            padding: 1.25rem;
            position: relative;
        }

        /* Month header row */
        .month-row {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 0.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid rgba(0,0,0,0.08);
        }

        .month-cn {
            font-family: var(--font-chinese);
            font-size: 0.9rem;
            color: var(--color-ink-light);
        }

        .month-en {
            font-family: var(--font-display);
            font-size: 1.1rem;
            color: var(--color-primary);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .year-badge {
            font-family: var(--font-english);
            font-size: 0.7rem;
            color: var(--color-ink-muted);
        }

        /* Large Date Number - Hero Element */
        .date-hero {
            text-align: center;
            padding: 1rem 0;
            position: relative;
        }

        .date-number {
            font-family: var(--font-display);
            font-size: 8rem;
            font-weight: 400;
            line-height: 0.85;
            color: var(--color-primary);
            letter-spacing: -0.02em;
        }

        .date-lunar-badge {
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            writing-mode: vertical-rl;
            font-family: var(--font-chinese);
            font-size: 0.9rem;
            color: var(--color-ink-light);
            letter-spacing: 0.2em;
        }

        .date-zodiac-badge {
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            writing-mode: vertical-rl;
            text-orientation: mixed;
            font-family: var(--font-english);
            font-size: 0.6rem;
            color: var(--color-ink-muted);
            letter-spacing: 0.15em;
            text-transform: uppercase;
        }

        /* Weekday row */
        .weekday-row {
            text-align: center;
            padding: 0.75rem 0;
            border-top: 1px solid rgba(0,0,0,0.08);
            border-bottom: 1px solid rgba(0,0,0,0.08);
            background: var(--color-paper-dark);
            margin: 0 -1.25rem;
            padding-left: 1.25rem;
            padding-right: 1.25rem;
        }

        .weekday-en {
            font-family: var(--font-english);
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--color-primary);
            letter-spacing: 0.2em;
            text-transform: uppercase;
        }

        .weekday-cn {
            font-family: var(--font-chinese);
            font-size: 0.75rem;
            color: var(--color-ink-light);
            margin-left: 0.5rem;
        }

        /* ===== Activities Section with decorative border ===== */
        .activities-section {
            margin-top: 1rem;
            padding: 1rem;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 4px;
            position: relative;
        }

        .activities-section::before {
            content: '';
            position: absolute;
            top: 4px;
            left: 4px;
            right: 4px;
            bottom: 4px;
            border: 1px solid rgba(0,0,0,0.05);
            border-radius: 2px;
            pointer-events: none;
        }

        .activity-row {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .activity-row:last-child {
            margin-bottom: 0;
        }

        .activity-label {
            font-family: var(--font-chinese);
            font-size: 0.9rem;
            font-weight: 700;
            width: 1.25rem;
            flex-shrink: 0;
        }

        .auspicious .activity-label {
            color: var(--color-accent);
        }

        .inauspicious .activity-label {
            color: var(--color-ink-muted);
        }

        .activity-items {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            flex: 1;
        }

        .activity-item {
            font-family: var(--font-chinese);
            font-size: 0.8rem;
            color: var(--color-ink);
            padding: 0.25rem 0.5rem;
            background: rgba(0,0,0,0.03);
            border-radius: 2px;
        }

        .activity-item .en {
            font-family: var(--font-body);
            font-size: 0.55rem;
            color: var(--color-ink-muted);
            display: block;
            margin-top: 0.125rem;
        }

        /* ===== Lucky Elements Row ===== */
        .lucky-row {
            display: flex;
            justify-content: space-between;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(0,0,0,0.08);
        }

        .lucky-item {
            text-align: center;
            flex: 1;
        }

        .lucky-item .label {
            font-family: var(--font-body);
            font-size: 0.55rem;
            color: var(--color-ink-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 0.25rem;
        }

        .lucky-item .value {
            font-family: var(--font-chinese);
            font-size: 0.9rem;
            color: var(--color-primary);
            font-weight: 600;
        }

        .lucky-item .value-en {
            font-family: var(--font-body);
            font-size: 0.6rem;
            color: var(--color-ink-light);
        }

        .color-dot {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 0.25rem;
            vertical-align: middle;
            border: 1px solid rgba(0,0,0,0.1);
        }

        /* ===== Personal Section ===== */
        .personal-section {
            margin-top: 1rem;
            padding: 0.875rem;
            background: var(--color-primary);
            border-radius: 4px;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .personal-section.hidden {
            display: none;
        }

        .personal-zodiac {
            display: flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.375rem 0.625rem;
            background: rgba(255,255,255,0.15);
            border-radius: 4px;
        }

        .personal-zodiac .emoji {
            font-size: 1.25rem;
        }

        .personal-zodiac .sign {
            font-family: var(--font-chinese);
            font-size: 0.9rem;
            color: white;
            font-weight: 600;
        }

        .personal-note {
            flex: 1;
            color: white;
        }

        .personal-note .label {
            font-family: var(--font-body);
            font-size: 0.55rem;
            color: rgba(255,255,255,0.7);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .personal-note .text {
            font-family: var(--font-chinese);
            font-size: 0.8rem;
            margin-top: 0.125rem;
            line-height: 1.4;
        }

        .personal-note .text-en {
            font-family: var(--font-body);
            font-size: 0.6rem;
            color: rgba(255,255,255,0.8);
        }

        /* ===== Sealed State ===== */
        .huangli-sealed {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--color-paper);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 10;
            transition: opacity 0.4s ease;
        }

        .huangli-sealed.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .seal-icon {
            font-size: 3rem;
            color: var(--color-primary);
            margin-bottom: 1rem;
            opacity: 0.6;
        }

        .seal-text {
            font-family: var(--font-chinese);
            font-size: 1rem;
            color: var(--color-ink-light);
        }

        .seal-text-en {
            font-family: var(--font-body);
            font-size: 0.7rem;
            color: var(--color-ink-muted);
            margin-top: 0.25rem;
            letter-spacing: 0.1em;
        }

        /* ===== Main Deck ===== */
        .deck-section {
            margin-top: 2rem;
            text-align: center;
        }

        .main-deck {
            width: 100px;
            height: 140px;
            background: linear-gradient(145deg, var(--color-accent) 0%, var(--color-accent-dark) 100%);
            border-radius: 6px;
            margin: 0 auto;
            cursor: pointer;
            position: relative;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow:
                0 4px 12px rgba(166, 25, 17, 0.3),
                3px 3px 0 var(--color-paper-dark),
                6px 6px 0 var(--color-gold);
        }

        .main-deck:hover {
            transform: translateY(-4px);
        }

        .main-deck::before {
            content: 'Âçú';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: var(--font-chinese);
            font-size: 2rem;
            color: rgba(255,255,255,0.2);
        }

        .tap-hint {
            font-family: var(--font-body);
            font-size: 0.65rem;
            color: var(--color-ink-muted);
            letter-spacing: 0.15em;
            text-transform: uppercase;
            margin-top: 0.875rem;
        }

        /* ===== Footer ===== */
        .footer {
            margin-top: 1.5rem;
            text-align: center;
        }

        .footer-link {
            font-family: var(--font-body);
            font-size: 0.6rem;
            color: var(--color-ink-muted);
            text-decoration: none;
            letter-spacing: 0.1em;
            cursor: pointer;
        }

        .footer-link:hover {
            color: var(--color-primary);
        }

        /* ===== Card Selection Screen ===== */
        .cards-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 12px;
            margin: 2rem 0;
        }

        .fortune-card {
            width: 70px;
            height: 98px;
            background: linear-gradient(145deg, var(--color-accent) 0%, var(--color-accent-dark) 100%);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .fortune-card:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .fortune-card::before {
            content: 'Âçú';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: var(--font-chinese);
            font-size: 1.25rem;
            color: rgba(255,255,255,0.2);
        }

        /* Screen titles */
        .screen-title {
            font-family: var(--font-chinese);
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--color-primary);
            text-align: center;
            margin-bottom: 0.5rem;
        }

        .screen-subtitle {
            font-family: var(--font-body);
            font-size: 0.75rem;
            color: var(--color-ink-muted);
            text-align: center;
            margin-bottom: 1.5rem;
        }

        /* Buttons */
        .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            font-family: var(--font-body);
            font-size: 0.7rem;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0.5rem;
        }

        .btn-primary {
            background: var(--color-accent);
            color: white;
        }

        .btn-primary:hover {
            background: var(--color-accent-light);
        }

        .btn-text {
            background: none;
            border: none;
            color: var(--color-ink-muted);
            font-family: var(--font-body);
            font-size: 0.65rem;
            padding: 0.5rem 1rem;
            cursor: pointer;
            letter-spacing: 0.1em;
        }

        .btn-text:hover {
            color: var(--color-primary);
        }

        /* Reading result screen */
        .reading-card {
            background: var(--color-paper);
            border-radius: 8px;
            padding: 2rem 1.5rem;
            text-align: center;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .reading-card .category {
            font-family: var(--font-body);
            font-size: 0.6rem;
            letter-spacing: 0.2em;
            color: var(--color-ink-muted);
            text-transform: uppercase;
            margin-bottom: 0.5rem;
        }

        .reading-card .fortune-type {
            font-family: var(--font-chinese);
            font-size: 1.25rem;
            color: var(--color-primary);
            margin-bottom: 0.5rem;
        }

        .reading-card .symbol {
            font-size: 2rem;
            color: var(--color-accent);
            margin: 1rem 0;
        }

        .reading-card .reading-text {
            font-family: var(--font-chinese);
            font-size: 0.95rem;
            line-height: 1.8;
            color: var(--color-ink);
        }

        .guidance-section {
            background: var(--color-paper);
            border-radius: 8px;
            padding: 1.25rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .guidance-section h4 {
            font-family: var(--font-body);
            font-size: 0.6rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: var(--color-ink-muted);
            margin-bottom: 0.75rem;
        }

        .guidance-section ul {
            list-style: none;
            padding: 0;
        }

        .guidance-section li {
            font-family: var(--font-chinese);
            font-size: 0.85rem;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(0,0,0,0.08);
            color: var(--color-ink);
        }

        .guidance-section li:last-child {
            border-bottom: none;
        }

        .guidance-section li span {
            font-family: var(--font-body);
            color: var(--color-ink-muted);
            font-size: 0.6rem;
            display: block;
            margin-bottom: 0.25rem;
            letter-spacing: 0.1em;
            text-transform: uppercase;
        }

        /* Modal styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--color-paper);
            border-radius: 8px;
            max-width: 400px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            padding: 2rem;
            position: relative;
        }

        .modal h3 {
            font-family: var(--font-chinese);
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: var(--color-ink);
        }

        .modal p {
            font-family: var(--font-body);
            font-size: 0.8rem;
            margin-bottom: 1rem;
            color: var(--color-ink-light);
            line-height: 1.6;
        }

        .modal ul {
            padding-left: 1.25rem;
            margin-bottom: 1rem;
        }

        .modal li {
            font-family: var(--font-body);
            font-size: 0.8rem;
            color: var(--color-ink-light);
            margin-bottom: 0.5rem;
            line-height: 1.5;
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--color-ink-muted);
            line-height: 1;
        }

        .modal-close:hover {
            color: var(--color-ink);
        }

        /* ===== Upsell Section ===== */
        .upsell-section {
            text-align: center;
            padding: 1.5rem;
            background: linear-gradient(to bottom, var(--color-paper), var(--color-paper-dark));
            border-radius: 8px;
            border: 1px solid rgba(0,0,0,0.08);
        }

        .upsell-section h4 {
            font-family: var(--font-chinese);
            font-size: 1rem;
            color: var(--color-ink);
            margin-bottom: 0.5rem;
        }

        .upsell-section p {
            font-family: var(--font-body);
            font-size: 0.75rem;
            color: var(--color-ink-muted);
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .upsell-section .btn {
            display: block;
            width: 100%;
            margin-bottom: 0.5rem;
        }

        .upsell-section .btn-text {
            display: block;
            width: 100%;
            margin: 0;
        }

        /* ===== Form Styles ===== */
        .form-group {
            margin-bottom: 1.5rem;
            text-align: left;
        }

        .form-group label {
            display: block;
            font-family: var(--font-body);
            font-size: 0.65rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: var(--color-ink-muted);
            margin-bottom: 0.5rem;
        }

        .form-group textarea {
            width: 100%;
            padding: 1rem;
            font-family: var(--font-chinese);
            font-size: 0.9rem;
            border: 1px solid rgba(0,0,0,0.15);
            border-radius: 6px;
            resize: none;
            height: 100px;
            background: var(--color-paper);
            color: var(--color-ink);
            transition: border-color 0.3s ease;
        }

        .form-group textarea:focus {
            outline: none;
            border-color: var(--color-primary);
        }

        .form-group input[type="date"] {
            width: 100%;
            padding: 0.875rem 1rem;
            font-family: var(--font-body);
            font-size: 0.9rem;
            border: 1px solid rgba(0,0,0,0.15);
            border-radius: 6px;
            background: var(--color-paper);
            color: var(--color-ink);
            transition: border-color 0.3s ease;
        }

        .form-group input[type="date"]:focus {
            outline: none;
            border-color: var(--color-primary);
        }

        /* Wish suggestions */
        .wish-suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .wish-chip {
            padding: 0.5rem 0.75rem;
            font-family: var(--font-body);
            font-size: 0.7rem;
            background: var(--color-paper);
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--color-ink-light);
        }

        .wish-chip:hover {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }

        /* Horoscope display */
        .horoscope-display {
            background: var(--color-paper);
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 0.75rem;
        }

        .horoscope-display.hidden {
            display: none;
        }

        .horoscope-row {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            font-size: 0.85rem;
        }

        .horoscope-row:last-child {
            border-bottom: none;
        }

        .horoscope-row .label {
            font-family: var(--font-body);
            color: var(--color-ink-muted);
            font-size: 0.7rem;
        }

        .horoscope-row .value {
            font-family: var(--font-chinese);
            color: var(--color-primary);
            font-weight: 600;
        }

        /* ===== Offering Screen ===== */
        .offering-container {
            background: var(--color-paper);
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .offering-amount {
            text-align: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid rgba(0,0,0,0.08);
        }

        .offering-amount .price-large {
            font-family: var(--font-display);
            font-size: 2.5rem;
            font-weight: 400;
            color: var(--color-primary);
        }

        .offering-amount .price-label {
            font-family: var(--font-body);
            font-size: 0.7rem;
            color: var(--color-ink-muted);
            letter-spacing: 0.1em;
            text-transform: uppercase;
            margin-top: 0.25rem;
        }

        .kofi-link {
            display: block;
            width: 100%;
            padding: 1rem;
            background: var(--color-accent);
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-family: var(--font-body);
            font-size: 0.8rem;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            text-align: center;
            margin-bottom: 1rem;
            transition: background 0.3s ease;
        }

        .kofi-link:hover {
            background: var(--color-accent-light);
        }

        .karma-message {
            text-align: center;
            padding: 1rem;
            background: linear-gradient(to bottom, transparent, var(--color-paper-dark));
            border-radius: 6px;
            margin-bottom: 1rem;
        }

        .karma-message p {
            font-family: var(--font-chinese);
            font-size: 0.85rem;
            font-style: italic;
            color: var(--color-ink-light);
            line-height: 1.6;
        }

        .honor-note {
            font-family: var(--font-body);
            font-size: 0.65rem;
            color: var(--color-ink-muted);
            text-align: center;
            margin-top: 0.5rem;
        }

        /* ===== Paid Cards Grid (30 cards) ===== */
        .cards-grid-paid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
            margin: 1.5rem 0;
        }

        .cards-grid-paid .fortune-card {
            width: 50px;
            height: 70px;
        }

        .cards-grid-paid .fortune-card::before {
            font-size: 0.9rem;
        }

        /* Card patterns for paid tier */
        .fortune-card.pattern-1::after { content: ''; width: 20px; height: 20px; border: 1px solid rgba(255,255,255,0.15); border-radius: 50%; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .fortune-card.pattern-2::after { content: ''; width: 16px; height: 16px; border: 1px solid rgba(255,255,255,0.15); transform: translate(-50%, -50%) rotate(45deg); position: absolute; top: 50%; left: 50%; }
        .fortune-card.pattern-3::after { content: ''; width: 10px; height: 20px; border: 1px solid rgba(255,255,255,0.15); position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .fortune-card.pattern-4::after { content: ''; width: 20px; height: 10px; border: 1px solid rgba(255,255,255,0.15); position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .fortune-card.pattern-5::after { content: ''; width: 14px; height: 14px; border: 1px solid rgba(255,255,255,0.15); border-radius: 2px; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }

        /* ===== Paid Reading Signs Section ===== */
        .your-signs {
            background: var(--color-primary);
            border-radius: 8px;
            padding: 1rem 1.25rem;
            margin-bottom: 1.5rem;
        }

        .your-signs h4 {
            font-family: var(--font-body);
            font-size: 0.6rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: rgba(255,255,255,0.7);
            margin-bottom: 0.5rem;
        }

        .signs-row {
            display: flex;
            gap: 1.5rem;
        }

        .signs-row .sign-item {
            display: flex;
            flex-direction: column;
        }

        .signs-row .sign-label {
            font-family: var(--font-body);
            font-size: 0.55rem;
            color: rgba(255,255,255,0.6);
            letter-spacing: 0.05em;
            text-transform: uppercase;
        }

        .signs-row .sign-value {
            font-family: var(--font-chinese);
            color: white;
            font-size: 0.9rem;
        }

        /* ===== Detailed Reading ===== */
        .detailed-reading {
            background: var(--color-paper);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .detailed-reading h4 {
            font-family: var(--font-body);
            font-size: 0.6rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: var(--color-ink-muted);
            margin-bottom: 0.75rem;
        }

        .detailed-reading p {
            font-family: var(--font-chinese);
            font-size: 0.9rem;
            margin-bottom: 1rem;
            color: var(--color-ink);
            line-height: 1.8;
        }

        .detailed-reading ul {
            list-style: none;
            padding: 0;
        }

        .detailed-reading li {
            font-family: var(--font-chinese);
            font-size: 0.85rem;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(0,0,0,0.08);
            color: var(--color-ink);
        }

        .detailed-reading li:last-child {
            border-bottom: none;
        }

        .detailed-reading li span {
            font-family: var(--font-body);
            color: var(--color-ink-muted);
            font-size: 0.6rem;
            display: block;
            margin-bottom: 0.25rem;
            letter-spacing: 0.1em;
            text-transform: uppercase;
        }

        /* Full width button */
        .btn-full {
            display: block;
            width: 100%;
            margin: 0;
        }

        /* ===== Animations ===== */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .huangli-card {
            animation: fadeIn 0.5s ease;
        }
    </style>
</head>
<body>
    <div class="container">

        <!-- Screen 1: Start / Daily Calendar -->
        <div class="screen active" id="screen-start">
            <!-- Header -->
            <header class="app-header">
                <h1 class="app-title">ÊØèÊó•ÈªÑÂéÜ</h1>
                <p class="app-subtitle">Daily Fortune Calendar</p>
            </header>

            <!-- Calendar Card -->
            <div class="huangli-card">
                <!-- Top accent bar -->
                <div class="huangli-topbar">
                    <span class="topbar-left" id="topbar-year">ËõáÂπ¥</span>
                    <span class="topbar-right" id="topbar-year-en">Year of the Snake</span>
                </div>

                <!-- Main content -->
                <div class="huangli-main">
                    <!-- Month row -->
                    <div class="month-row">
                        <span class="month-cn" id="month-cn">Ê≠£Êúà</span>
                        <span class="month-en" id="month-en">January</span>
                        <span class="year-badge" id="year-badge">2026</span>
                    </div>

                    <!-- Large date hero -->
                    <div class="date-hero">
                        <span class="date-zodiac-badge" id="day-zodiac">Snake Day</span>
                        <span class="date-number" id="date-number">30</span>
                        <span class="date-lunar-badge" id="lunar-day">Âàù‰∫å</span>
                    </div>

                    <!-- Weekday -->
                    <div class="weekday-row">
                        <span class="weekday-en" id="weekday-en">Thursday</span>
                        <span class="weekday-cn" id="weekday-cn">ÊòüÊúüÂõõ</span>
                    </div>

                    <!-- Activities with decorative border -->
                    <div class="activities-section">
                        <div class="activity-row auspicious">
                            <span class="activity-label">ÂÆú</span>
                            <div class="activity-items" id="auspicious-items">
                                <!-- Populated by JS -->
                            </div>
                        </div>
                        <div class="activity-row inauspicious">
                            <span class="activity-label">Âøå</span>
                            <div class="activity-items" id="inauspicious-items">
                                <!-- Populated by JS -->
                            </div>
                        </div>
                    </div>

                    <!-- Lucky elements -->
                    <div class="lucky-row">
                        <div class="lucky-item">
                            <div class="label">Lucky Color</div>
                            <div class="value" id="lucky-color">
                                <span class="color-dot" id="color-dot"></span><span id="color-cn">Á∫¢</span>
                            </div>
                            <div class="value-en" id="color-en">Red</div>
                        </div>
                        <div class="lucky-item">
                            <div class="label">Direction</div>
                            <div class="value" id="direction-cn">‰∏úÂçó</div>
                            <div class="value-en" id="direction-en">Southeast</div>
                        </div>
                        <div class="lucky-item">
                            <div class="label">Number</div>
                            <div class="value" id="lucky-numbers">3, 8</div>
                            <div class="value-en">&nbsp;</div>
                        </div>
                    </div>

                    <!-- Personal section (if birthday set) -->
                    <div class="personal-section hidden" id="personal-section">
                        <div class="personal-zodiac">
                            <span class="emoji" id="user-zodiac-emoji">üêâ</span>
                            <span class="sign" id="user-zodiac-cn">Èæô</span>
                        </div>
                        <div class="personal-note">
                            <div class="label">Today's Fortune</div>
                            <div class="text" id="personal-fortune-cn">Ë¥µ‰∫∫Áõ∏Âä©ÔºåÂÆú‰∏ªÂä®Âá∫Âáª</div>
                            <div class="text-en" id="personal-fortune-en">Helpful allies. Take initiative.</div>
                        </div>
                    </div>
                </div>

                <!-- Sealed overlay -->
                <div class="huangli-sealed" id="sealed" onclick="revealDailyCard()">
                    <div class="seal-icon">‚òæ</div>
                    <p class="seal-text">ËΩªËß¶Êè≠Êôì‰ªäÊó•ËøêÂäø</p>
                    <p class="seal-text-en">tap to reveal</p>
                </div>
            </div>

            <!-- Main deck -->
            <div class="deck-section">
                <div class="main-deck" onclick="showScreen('screen-cards-free')"></div>
                <p class="tap-hint">Full Reading</p>
            </div>

            <!-- Footer -->
            <footer class="footer">
                <span class="footer-link" onclick="openModal('disclaimer')">Privacy & Terms</span>
            </footer>
        </div>

        <!-- Screen 2: Card Selection (Free) -->
        <div class="screen" id="screen-cards-free">
            <h2 class="screen-title">ÈÄâÊã©‰Ω†ÁöÑÂëΩËøê</h2>
            <p class="screen-subtitle">Choose Your Card</p>

            <div class="cards-grid">
                <div class="fortune-card" onclick="selectCard('free')"></div>
                <div class="fortune-card" onclick="selectCard('free')"></div>
                <div class="fortune-card" onclick="selectCard('free')"></div>
            </div>

            <button class="btn-text" onclick="showScreen('screen-start')">‚Üê back</button>
        </div>

        <!-- Screen 3: Reading Result -->
        <div class="screen" id="screen-reading">
            <div class="reading-card">
                <p class="category">Your Fortune</p>
                <p class="fortune-type" id="reading-category">Career</p>
                <p class="symbol" id="reading-symbol">‚óà</p>
                <p class="reading-text" id="reading-text">A shift approaches in your professional life.</p>
            </div>

            <div class="guidance-section">
                <h4>Your Guidance</h4>
                <ul>
                    <li id="guidance-object">
                        <span>Lucky Object</span>
                        A silver key
                    </li>
                    <li id="guidance-day">
                        <span>Favorable Day</span>
                        Thursday
                    </li>
                    <li id="guidance-action">
                        <span>Action to Take</span>
                        Reach out to someone
                    </li>
                    <li id="guidance-avoid">
                        <span>Thing to Avoid</span>
                        Making major decisions
                    </li>
                </ul>
            </div>

            <!-- Upsell Section -->
            <div class="upsell-section">
                <h4>Seek Deeper Guidance?</h4>
                <p>Unlock personalized insights based on your zodiac signs, with detailed actions and timing.</p>
                <button class="btn btn-primary" onclick="showScreen('screen-wish-form')">Get Deeper Insights</button>
                <button class="btn-text" onclick="showScreen('screen-start')">Maybe later</button>
            </div>
        </div>

        <!-- Screen 4: Wish Form (Paid Flow) -->
        <div class="screen" id="screen-wish-form">
            <h2 class="screen-title">ËÆæÂÆö‰Ω†ÁöÑÊÑèÂêë</h2>
            <p class="screen-subtitle">Set Your Intention</p>

            <div class="form-group">
                <label>Your Wish ÂøÉÊÑø</label>
                <textarea id="wish-input" placeholder="Share what guidance you seek..."></textarea>
                <div class="wish-suggestions" id="wish-suggestions">
                    <!-- Populated by JS -->
                </div>
            </div>

            <div class="form-group">
                <label>Your Birthday ÁîüÊó•</label>
                <input type="date" id="birthday-input" onchange="calculateHoroscopes()">
                <div class="horoscope-display hidden" id="horoscope-display">
                    <div class="horoscope-row">
                        <span class="label">Western Zodiac</span>
                        <span class="value" id="western-zodiac">-</span>
                    </div>
                    <div class="horoscope-row">
                        <span class="label">Chinese Zodiac</span>
                        <span class="value" id="chinese-zodiac">-</span>
                    </div>
                    <div class="horoscope-row">
                        <span class="label">Element</span>
                        <span class="value" id="element">-</span>
                    </div>
                </div>
            </div>

            <button class="btn btn-primary btn-full" onclick="showScreen('screen-offering')">Continue</button>
            <button class="btn-text" onclick="showScreen('screen-reading')">‚Üê back</button>
        </div>

        <!-- Screen 5: Offering (Ko-fi) -->
        <div class="screen" id="screen-offering">
            <h2 class="screen-title">ËØöÂøÉ‰æõÂÖª</h2>
            <p class="screen-subtitle">Make Your Offering</p>

            <div class="offering-container">
                <div class="offering-amount">
                    <p class="price-large">$2.99</p>
                    <p class="price-label">Suggested Offering</p>
                </div>

                <a href="https://ko-fi.com/fortuneapp" class="kofi-link" target="_blank">‚òï Support on Ko-fi</a>

                <div class="karma-message">
                    <p>"The energy you give returns threefold. Your honesty strengthens the reading you're about to receive."</p>
                </div>

                <button class="btn btn-primary btn-full" onclick="confirmOffering()">I've Made My Offering</button>
                <p class="honor-note">We trust in your integrity</p>
            </div>

            <button class="btn-text" onclick="showScreen('screen-wish-form')">‚Üê back</button>
        </div>

        <!-- Screen 6: Paid Card Selection (30 cards) -->
        <div class="screen" id="screen-cards-paid">
            <h2 class="screen-title">ÈÄâÊã©‰Ω†ÁöÑÂëΩËøê</h2>
            <p class="screen-subtitle">Thank you for your offering. Let your intuition guide you.</p>

            <div class="cards-grid-paid" id="paid-cards-grid">
                <!-- Generated by JS -->
            </div>

            <button class="btn-text" onclick="showScreen('screen-offering')">‚Üê back</button>
        </div>

        <!-- Screen 7: Paid Reading Result -->
        <div class="screen" id="screen-reading-paid">
            <div class="your-signs" id="reading-signs">
                <h4>Your Signs</h4>
                <div class="signs-row">
                    <div class="sign-item">
                        <span class="sign-label">Western</span>
                        <span class="sign-value" id="reading-western">Aries</span>
                    </div>
                    <div class="sign-item">
                        <span class="sign-label">Chinese</span>
                        <span class="sign-value" id="reading-chinese">Dragon</span>
                    </div>
                    <div class="sign-item">
                        <span class="sign-label">Element</span>
                        <span class="sign-value" id="reading-element">Fire</span>
                    </div>
                </div>
            </div>

            <div class="reading-card">
                <p class="category">Your Fortune</p>
                <p class="fortune-type" id="paid-reading-category">Career</p>
                <p class="symbol" id="paid-reading-symbol">‚óà</p>
                <p class="reading-text" id="paid-reading-text">A shift approaches in your professional life.</p>
            </div>

            <div class="detailed-reading">
                <h4>Personalized Guidance</h4>
                <p id="paid-zodiac-insight">As a Dragon in the Year of the Snake, you have natural allies in positions of power...</p>
                <ul>
                    <li id="paid-guidance-object">
                        <span>Lucky Object</span>
                        A silver key
                    </li>
                    <li id="paid-guidance-day">
                        <span>Favorable Day</span>
                        Thursday
                    </li>
                    <li id="paid-guidance-action">
                        <span>Action to Take</span>
                        Reach out to someone
                    </li>
                    <li id="paid-guidance-avoid">
                        <span>Thing to Avoid</span>
                        Making major decisions
                    </li>
                    <li id="paid-guidance-timing">
                        <span>Best Timing</span>
                        Morning hours (6am-10am)
                    </li>
                </ul>
            </div>

            <button class="btn btn-primary btn-full" onclick="showScreen('screen-start')">Return Home</button>
        </div>

    </div>

    <!-- Disclaimer Modal -->
    <div class="modal-overlay" id="modal-disclaimer" onclick="closeModalOnOverlay(event)">
        <div class="modal">
            <button class="modal-close" onclick="closeModal('disclaimer')">&times;</button>
            <h3>Privacy & Terms</h3>

            <p><strong>For Entertainment Only</strong></p>
            <p>Fortune ÈªÑÂéÜ is intended for entertainment purposes only. Readings should not be taken as professional advice for financial, medical, legal, or psychological matters.</p>

            <p><strong>Your Privacy</strong></p>
            <ul>
                <li>Your birthday is stored locally on your device only‚Äînever on our servers</li>
                <li>This allows us to personalize your daily fortune experience</li>
                <li>All information stays in your browser and is never transmitted</li>
                <li>We do not use cookies or external tracking</li>
                <li>Clear your browser data anytime to remove all stored information</li>
            </ul>

            <p><strong>Contact</strong></p>
            <p>Questions? Reach us at hello@example.com</p>
        </div>
    </div>

    <script>
        // ===== Data Pools =====

        // Chinese zodiac animals with emojis
        const chineseZodiacs = {
            'Rat': { cn: 'Èº†', emoji: 'üêÄ' },
            'Ox': { cn: 'Áâõ', emoji: 'üêÇ' },
            'Tiger': { cn: 'Ëôé', emoji: 'üêÖ' },
            'Rabbit': { cn: 'ÂÖî', emoji: 'üêá' },
            'Dragon': { cn: 'Èæô', emoji: 'üêâ' },
            'Snake': { cn: 'Ëõá', emoji: 'üêç' },
            'Horse': { cn: 'È©¨', emoji: 'üê¥' },
            'Goat': { cn: 'Áæä', emoji: 'üêê' },
            'Monkey': { cn: 'Áå¥', emoji: 'üêµ' },
            'Rooster': { cn: 'È∏°', emoji: 'üêì' },
            'Dog': { cn: 'Áãó', emoji: 'üêï' },
            'Pig': { cn: 'Áå™', emoji: 'üêñ' }
        };

        // Day zodiac cycle (12-day rotation)
        const dayZodiacs = ['Rat', 'Ox', 'Tiger', 'Rabbit', 'Dragon', 'Snake', 'Horse', 'Goat', 'Monkey', 'Rooster', 'Dog', 'Pig'];

        // Lunar months
        const lunarMonths = ['Ê≠£Êúà', '‰∫åÊúà', '‰∏âÊúà', 'ÂõõÊúà', '‰∫îÊúà', 'ÂÖ≠Êúà', '‰∏ÉÊúà', 'ÂÖ´Êúà', '‰πùÊúà', 'ÂçÅÊúà', 'ÂÜ¨Êúà', 'ËÖäÊúà'];

        // Lunar days
        const lunarDays = ['Âàù‰∏Ä', 'Âàù‰∫å', 'Âàù‰∏â', 'ÂàùÂõõ', 'Âàù‰∫î', 'ÂàùÂÖ≠', 'Âàù‰∏É', 'ÂàùÂÖ´', 'Âàù‰πù', 'ÂàùÂçÅ',
                          'ÂçÅ‰∏Ä', 'ÂçÅ‰∫å', 'ÂçÅ‰∏â', 'ÂçÅÂõõ', 'ÂçÅ‰∫î', 'ÂçÅÂÖ≠', 'ÂçÅ‰∏É', 'ÂçÅÂÖ´', 'ÂçÅ‰πù', '‰∫åÂçÅ',
                          'Âªø‰∏Ä', 'Âªø‰∫å', 'Âªø‰∏â', 'ÂªøÂõõ', 'Âªø‰∫î', 'ÂªøÂÖ≠', 'Âªø‰∏É', 'ÂªøÂÖ´', 'Âªø‰πù', '‰∏âÂçÅ'];

        // Weekdays
        const weekdaysCn = ['ÊòüÊúüÊó•', 'ÊòüÊúü‰∏Ä', 'ÊòüÊúü‰∫å', 'ÊòüÊúü‰∏â', 'ÊòüÊúüÂõõ', 'ÊòüÊúü‰∫î', 'ÊòüÊúüÂÖ≠'];
        const weekdaysEn = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
        const monthsEn = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

        // Auspicious activities pool
        const auspiciousPool = [
            { cn: 'Á•àÁ¶è', en: 'Pray' },
            { cn: 'Âá∫Ë°å', en: 'Travel' },
            { cn: 'Ê±ÇË¥¢', en: 'Wealth' },
            { cn: 'ÂºÄ‰∏ö', en: 'Business' },
            { cn: 'Á∫¶‰ºö', en: 'Date' },
            { cn: 'Èù¢ËØï', en: 'Interview' },
            { cn: 'Êê¨ÂÆ∂', en: 'Move' },
            { cn: 'Á≠æÁ∫¶', en: 'Contract' },
            { cn: '‰ºöÂèã', en: 'Socialize' },
            { cn: 'Â≠¶‰π†', en: 'Study' },
            { cn: 'ÊäïËµÑ', en: 'Invest' },
            { cn: 'Âàõ‰Ωú', en: 'Create' }
        ];

        // Inauspicious activities pool
        const inauspiciousPool = [
            { cn: 'Âä®Âúü', en: 'Construct' },
            { cn: '‰∫âÊâß', en: 'Conflict' },
            { cn: 'ËøúË°å', en: 'Long trip' },
            { cn: 'ÁÜ¨Â§ú', en: 'Stay up' },
            { cn: 'ÂÜ≤Âä®', en: 'Impulse' },
            { cn: 'ÂÄüË¥∑', en: 'Borrow' },
            { cn: 'ËØâËÆº', en: 'Lawsuit' },
            { cn: 'ÂàÜÊâã', en: 'Break up' }
        ];

        // Lucky colors
        const luckyColors = [
            { cn: 'Á∫¢', en: 'Red', hex: '#A61911' },
            { cn: 'Èáë', en: 'Gold', hex: '#C9A962' },
            { cn: 'Áªø', en: 'Green', hex: '#1D5C5C' },
            { cn: 'Ëìù', en: 'Blue', hex: '#3A6EA5' },
            { cn: 'Á¥´', en: 'Purple', hex: '#6B4E8B' },
            { cn: 'Á≤â', en: 'Pink', hex: '#D4A5A5' },
            { cn: 'ÁôΩ', en: 'White', hex: '#F5F5F5' },
            { cn: 'Èªë', en: 'Black', hex: '#2C2C2C' }
        ];

        // Lucky directions
        const luckyDirections = [
            { cn: '‰∏ú', en: 'East' },
            { cn: '‰∏úÂçó', en: 'Southeast' },
            { cn: 'Âçó', en: 'South' },
            { cn: 'Ë•øÂçó', en: 'Southwest' },
            { cn: 'Ë•ø', en: 'West' },
            { cn: 'Ë•øÂåó', en: 'Northwest' },
            { cn: 'Âåó', en: 'North' },
            { cn: '‰∏úÂåó', en: 'Northeast' }
        ];

        // Lucky number pairs
        const luckyNumberPairs = ['1, 6', '2, 7', '3, 8', '4, 9', '5, 10', '6, 8', '3, 6', '8, 9'];

        // Personal fortunes by zodiac
        const personalFortunes = {
            'Rat': [
                { cn: 'Êú∫ÈÅáÊù•‰∏¥ÔºåÊääÊè°Êó∂Êú∫', en: 'Opportunity knocks. Seize it.' },
                { cn: 'Ë¥¢Ëøê‰∫®ÈÄöÔºåÂ∞èÂøÉÂÆàË¥¢', en: 'Wealth flows. Guard it wisely.' }
            ],
            'Ox': [
                { cn: 'Á®≥Ê≠•ÂâçËøõÔºåÁªàÊúâÊî∂Ëé∑', en: 'Steady progress brings rewards.' },
                { cn: 'Ë¥µ‰∫∫Áõ∏Âä©Ôºå‰∫ãÂçäÂäüÂÄç', en: 'Helpful allies double your success.' }
            ],
            'Tiger': [
                { cn: 'ÂãáÂæÄÁõ¥ÂâçÔºåÊó†ÊÉßÊåëÊàò', en: 'Charge forward fearlessly.' },
                { cn: 'ÈÄÇÂΩìÊî∂ÊïõÔºåËìÑÂäøÂæÖÂèë', en: 'Conserve energy for the right moment.' }
            ],
            'Rabbit': [
                { cn: 'ÂíåÊ∞îÁîüË¥¢Ôºå‰ª•ÊüîÂÖãÂàö', en: 'Gentle wins. Softness conquers.' },
                { cn: 'Ê°ÉËä±ËøêÊó∫ÔºåÊ≥®ÊÑèÈÄâÊã©', en: 'Romance blooms. Choose wisely.' }
            ],
            'Dragon': [
                { cn: 'Ë¥µ‰∫∫Áõ∏Âä©ÔºåÂÆú‰∏ªÂä®Âá∫Âáª', en: 'Helpful allies. Take initiative.' },
                { cn: 'ÈæôËÖæËôéË∑ÉÔºåÂ§ßÂ±ïÂÆèÂõæ', en: 'Soar high. Dream big today.' }
            ],
            'Snake': [
                { cn: 'ÈùôËßÇÂÖ∂ÂèòÔºåÂêéÂèëÂà∂‰∫∫', en: 'Watch and wait. Strike last.' },
                { cn: 'Êô∫ÊÖßÈÄöËææÔºåÊ¥ûÂØüÂÖàÊú∫', en: 'Wisdom guides. See ahead.' }
            ],
            'Horse': [
                { cn: 'Âø´È©¨Âä†Èû≠Ôºå‰∏ÄÂæÄÊó†Ââç', en: 'Full speed ahead. No stopping.' },
                { cn: 'Ê≥®ÊÑè‰ºëÊÅØÔºåÂÖªÁ≤æËìÑÈîê', en: 'Rest now. Store your energy.' }
            ],
            'Goat': [
                { cn: 'Ê∏©ÂíåÂæÖ‰∫∫ÔºåË¥µ‰∫∫Ëá™Êù•', en: 'Be gentle. Allies will come.' },
                { cn: 'Ëâ∫ÊúØÂàõ‰ΩúÔºåÁÅµÊÑüËø∏Âèë', en: 'Creative spark ignites today.' }
            ],
            'Monkey': [
                { cn: 'ÁÅµÊ¥ªÂ∫îÂèòÔºåÂåñÈô©‰∏∫Â§∑', en: 'Adapt quickly. Turn danger to safety.' },
                { cn: 'Â∞èÂøÉÂè£ËàåÔºåË∞®Ë®ÄÊÖéË°å', en: 'Watch your words carefully.' }
            ],
            'Rooster': [
                { cn: 'Êó©Ëµ∑ÊúâÁ¶èÔºåÂã§Â•ãËá¥ÂØå', en: 'Early bird wins. Work brings wealth.' },
                { cn: 'Ê≥®ÊÑèÁªÜËäÇÔºåÈÅøÂÖçÁñèÊºè', en: 'Mind the details. Avoid mistakes.' }
            ],
            'Dog': [
                { cn: 'Âø†ËØöÂæÖ‰∫∫ÔºåÁ¶èÊä•Ëá™Êù•', en: 'Loyalty brings blessings.' },
                { cn: '‰øùÊä§ÊâÄÁà±ÔºåÂÆàÊä§ÂÆ∂‰∫∫', en: 'Protect loved ones today.' }
            ],
            'Pig': [
                { cn: '‰∫´ÂèóÁîüÊ¥ªÔºåÁü•Ë∂≥Â∏∏‰πê', en: 'Enjoy life. Contentment is key.' },
                { cn: 'Ë¥¢ËøêÊó∫ÁõõÔºåÈÄÇÂêàÊäïËµÑ', en: 'Wealth luck strong. Good for investing.' }
            ]
        };

        // Fortune pool for card readings
        const fortunes = [
            { category: "Career", categoryEn: "‰∫ã‰∏ö", symbol: "‚óà", reading: "A shift approaches in your professional life. Stay alert to unexpected opportunities.", guidance: { object: "A silver pen", day: "Thursday", action: "Update your resume or portfolio", avoid: "Gossip in the workplace" }},
            { category: "Career", categoryEn: "‰∫ã‰∏ö", symbol: "‚óà", reading: "Recognition for your efforts is near. Someone in a position of influence notices your progress.", guidance: { object: "A blue notebook", day: "Monday", action: "Speak up in your next meeting", avoid: "Downplaying your achievements" }},
            { category: "Love", categoryEn: "ÊÑüÊÉÖ", symbol: "‚ô°", reading: "An unexpected connection awaits. The one you seek may not match your expectations but will match your heart.", guidance: { object: "A rose quartz", day: "Friday", action: "Say yes to an unusual invitation", avoid: "Dismissing people too quickly" }},
            { category: "Love", categoryEn: "ÊÑüÊÉÖ", symbol: "‚ô°", reading: "Deeper understanding grows in a relationship. Honest conversation strengthens your bond.", guidance: { object: "A handwritten letter", day: "Sunday", action: "Share something you've held back", avoid: "Assuming they already know" }},
            { category: "Wealth", categoryEn: "Ë¥¢Ëøê", symbol: "‚óá", reading: "A financial opportunity presents itself. Stay alert to unusual prospects and side opportunities.", guidance: { object: "A gold coin", day: "Thursday", action: "Research a new income stream", avoid: "Dismissing unconventional ideas" }},
            { category: "Wealth", categoryEn: "Ë¥¢Ëøê", symbol: "‚óá", reading: "Small leaks drain large reservoirs. Examine where your resources escape unnoticed.", guidance: { object: "A sealed jar", day: "Saturday", action: "Track all expenses for one week", avoid: "Mindless spending" }},
            { category: "Health", categoryEn: "ÂÅ•Â∫∑", symbol: "‚úß", reading: "Listen to what your body whispers. A message now demands attention before it becomes urgent.", guidance: { object: "A smooth stone", day: "Monday", action: "Rest when tiredness appears", avoid: "Ignoring physical signals" }},
            { category: "Health", categoryEn: "ÂÅ•Â∫∑", symbol: "‚úß", reading: "Movement brings breakthrough. Physical motion unlocks mental and emotional stagnation.", guidance: { object: "Walking shoes", day: "Wednesday", action: "Take a long walk in nature", avoid: "Sedentary problem-solving" }},
            { category: "Growth", categoryEn: "ÊàêÈïø", symbol: "‚ùã", reading: "You are ready for the next level. The discomfort you feel is the edge of your current container.", guidance: { object: "A butterfly image", day: "Thursday", action: "Commit to your next challenge", avoid: "Playing small when you're ready for more" }},
            { category: "Growth", categoryEn: "ÊàêÈïø", symbol: "‚ùã", reading: "What you resist persists. Facing what you avoid dissolves its power over you.", guidance: { object: "A small mirror", day: "Tuesday", action: "Face something you've been avoiding", avoid: "Running from recurring challenges" }},
            { category: "Creativity", categoryEn: "ÂàõÊÑè", symbol: "‚ú∫", reading: "Creative energy seeks expression through you. Make space for creation‚Äînot perfection, just expression.", guidance: { object: "A blank canvas", day: "Friday", action: "Create something today", avoid: "Perfectionism that blocks creation" }},
            { category: "Family", categoryEn: "ÂÆ∂Â∫≠", symbol: "‚åÇ", reading: "A family pattern is ready to break. You have power to transform what you received before passing it on.", guidance: { object: "A family photo", day: "Sunday", action: "Choose a different response", avoid: "Blindly repeating patterns" }}
        ];

        // ===== localStorage Management =====
        function getUserData() {
            try {
                return JSON.parse(localStorage.getItem('fortuneUserData')) || {};
            } catch (e) {
                return {};
            }
        }

        function saveUserData(data) {
            localStorage.setItem('fortuneUserData', JSON.stringify(data));
        }

        function getTodayString() {
            return new Date().toISOString().split('T')[0];
        }

        // ===== Deterministic random based on date =====
        function seededRandom(seed) {
            const x = Math.sin(seed) * 10000;
            return x - Math.floor(x);
        }

        function getDateSeed(dateStr) {
            let hash = 0;
            for (let i = 0; i < dateStr.length; i++) {
                const char = dateStr.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            return Math.abs(hash);
        }

        // ===== Lunar Calendar (Simplified) =====
        function getLunarDate(date) {
            const dayOfYear = Math.floor((date - new Date(date.getFullYear(), 0, 0)) / 86400000);
            const lunarDay = ((dayOfYear + 15) % 30) + 1;
            const lunarMonth = Math.floor((dayOfYear + 15) / 30) % 12;

            return {
                month: lunarMonths[lunarMonth],
                day: lunarDays[lunarDay - 1] || 'Âàù‰∏Ä'
            };
        }

        // ===== Get Year Animal =====
        function getYearAnimal(year) {
            const animals = ['Rat', 'Ox', 'Tiger', 'Rabbit', 'Dragon', 'Snake', 'Horse', 'Goat', 'Monkey', 'Rooster', 'Dog', 'Pig'];
            const startYear = 1900;
            const index = (year - startYear) % 12;
            return animals[index >= 0 ? index : index + 12];
        }

        // ===== Get Day Zodiac =====
        function getDayZodiac(date) {
            const baseDate = new Date(2024, 0, 1);
            const daysDiff = Math.floor((date - baseDate) / 86400000);
            const index = ((daysDiff % 12) + 12) % 12;
            return dayZodiacs[index];
        }

        // ===== Render Daily Calendar =====
        function renderDailyCalendar() {
            const today = new Date();
            const todayStr = getTodayString();
            const seed = getDateSeed(todayStr);

            // Year info
            const yearAnimal = getYearAnimal(today.getFullYear());
            const yearData = chineseZodiacs[yearAnimal];
            document.getElementById('topbar-year').textContent = yearData.cn + 'Âπ¥';
            document.getElementById('topbar-year-en').textContent = 'Year of the ' + yearAnimal;

            // Date info
            document.getElementById('date-number').textContent = today.getDate();
            document.getElementById('month-en').textContent = monthsEn[today.getMonth()];
            document.getElementById('year-badge').textContent = today.getFullYear();
            document.getElementById('weekday-en').textContent = weekdaysEn[today.getDay()];
            document.getElementById('weekday-cn').textContent = weekdaysCn[today.getDay()];

            // Lunar date
            const lunar = getLunarDate(today);
            document.getElementById('month-cn').textContent = lunar.month;
            document.getElementById('lunar-day').textContent = lunar.day;

            // Day zodiac
            const dayZodiac = getDayZodiac(today);
            document.getElementById('day-zodiac').textContent = dayZodiac + ' Day';

            // Auspicious activities
            const auspiciousCount = 3 + Math.floor(seededRandom(seed) * 2);
            const shuffledAuspicious = [...auspiciousPool].sort((a, b) => seededRandom(seed + a.cn.charCodeAt(0)) - 0.5);
            const todayAuspicious = shuffledAuspicious.slice(0, auspiciousCount);

            const auspiciousHtml = todayAuspicious.map(item =>
                `<div class="activity-item">${item.cn}<span class="en">${item.en}</span></div>`
            ).join('');
            document.getElementById('auspicious-items').innerHTML = auspiciousHtml;

            // Inauspicious activities
            const inauspiciousCount = 2 + Math.floor(seededRandom(seed + 1) * 2);
            const shuffledInauspicious = [...inauspiciousPool].sort((a, b) => seededRandom(seed + 100 + a.cn.charCodeAt(0)) - 0.5);
            const todayInauspicious = shuffledInauspicious.slice(0, inauspiciousCount);

            const inauspiciousHtml = todayInauspicious.map(item =>
                `<div class="activity-item">${item.cn}<span class="en">${item.en}</span></div>`
            ).join('');
            document.getElementById('inauspicious-items').innerHTML = inauspiciousHtml;

            // Lucky color
            const colorIndex = Math.floor(seededRandom(seed + 200) * luckyColors.length);
            const color = luckyColors[colorIndex];
            document.getElementById('color-cn').textContent = color.cn;
            document.getElementById('color-en').textContent = color.en;
            document.getElementById('color-dot').style.background = color.hex;

            // Lucky direction
            const dirIndex = Math.floor(seededRandom(seed + 300) * luckyDirections.length);
            const direction = luckyDirections[dirIndex];
            document.getElementById('direction-cn').textContent = direction.cn;
            document.getElementById('direction-en').textContent = direction.en;

            // Lucky numbers
            const numIndex = Math.floor(seededRandom(seed + 400) * luckyNumberPairs.length);
            document.getElementById('lucky-numbers').textContent = luckyNumberPairs[numIndex];

            // Personal section
            const userData = getUserData();
            if (userData.chineseZodiac) {
                const userZodiac = userData.chineseZodiac;
                const zodiacData = chineseZodiacs[userZodiac];
                const fortunes = personalFortunes[userZodiac] || personalFortunes['Dragon'];
                const fortuneIndex = Math.floor(seededRandom(seed + 500) * fortunes.length);
                const fortune = fortunes[fortuneIndex];

                document.getElementById('user-zodiac-emoji').textContent = zodiacData.emoji;
                document.getElementById('user-zodiac-cn').textContent = zodiacData.cn;
                document.getElementById('personal-fortune-cn').textContent = fortune.cn;
                document.getElementById('personal-fortune-en').textContent = fortune.en;
                document.getElementById('personal-section').classList.remove('hidden');
            }
        }

        // ===== Daily Card Reveal =====
        function revealDailyCard() {
            const userData = getUserData();
            const today = getTodayString();

            if (userData.dailyCard?.lastRevealDate === today && userData.dailyCard?.revealed) {
                return;
            }

            userData.dailyCard = {
                lastRevealDate: today,
                revealed: true
            };
            saveUserData(userData);

            document.getElementById('sealed').classList.add('hidden');
        }

        // ===== Check if already revealed today =====
        function checkDailyState() {
            const userData = getUserData();
            const today = getTodayString();

            if (userData.dailyCard?.lastRevealDate === today && userData.dailyCard?.revealed) {
                document.getElementById('sealed').classList.add('hidden');
            } else {
                document.getElementById('sealed').classList.remove('hidden');
            }
        }

        // ===== Screen Navigation =====
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');

            if (screenId === 'screen-start') {
                renderDailyCalendar();
                checkDailyState();
            }

            if (screenId === 'screen-wish-form') {
                generateWishSuggestions();
                // Pre-fill birthday if saved
                const userData = getUserData();
                if (userData.birthday) {
                    document.getElementById('birthday-input').value = userData.birthday;
                    calculateHoroscopes();
                }
            }
        }

        // ===== Card Selection =====
        function selectCard(tier) {
            const fortune = fortunes[Math.floor(Math.random() * fortunes.length)];

            if (tier === 'free') {
                document.getElementById('reading-category').textContent = fortune.category;
                document.getElementById('reading-symbol').textContent = fortune.symbol;
                document.getElementById('reading-text').textContent = fortune.reading;
                document.getElementById('guidance-object').innerHTML = '<span>Lucky Object</span>' + fortune.guidance.object;
                document.getElementById('guidance-day').innerHTML = '<span>Favorable Day</span>' + fortune.guidance.day;
                document.getElementById('guidance-action').innerHTML = '<span>Action to Take</span>' + fortune.guidance.action;
                document.getElementById('guidance-avoid').innerHTML = '<span>Thing to Avoid</span>' + fortune.guidance.avoid;

                showScreen('screen-reading');
            } else {
                // Paid reading
                document.getElementById('paid-reading-category').textContent = fortune.category;
                document.getElementById('paid-reading-symbol').textContent = fortune.symbol;
                document.getElementById('paid-reading-text').textContent = fortune.reading;

                // Update signs from user horoscope
                document.getElementById('reading-western').textContent = userHoroscope.western || 'Unknown';
                document.getElementById('reading-chinese').textContent = userHoroscope.chinese || 'Unknown';
                document.getElementById('reading-element').textContent = userHoroscope.element || 'Unknown';

                // Generate personalized zodiac insight
                const zodiacInsight = generateZodiacInsight(userHoroscope, fortune.category);
                document.getElementById('paid-zodiac-insight').textContent = zodiacInsight;

                // Update guidance
                document.getElementById('paid-guidance-object').innerHTML = '<span>Lucky Object</span>' + fortune.guidance.object;
                document.getElementById('paid-guidance-day').innerHTML = '<span>Favorable Day</span>' + fortune.guidance.day;
                document.getElementById('paid-guidance-action').innerHTML = '<span>Action to Take</span>' + fortune.guidance.action;
                document.getElementById('paid-guidance-avoid').innerHTML = '<span>Thing to Avoid</span>' + fortune.guidance.avoid;

                // Add timing based on zodiac
                const timing = getZodiacTiming(userHoroscope.chinese);
                document.getElementById('paid-guidance-timing').innerHTML = '<span>Best Timing</span>' + timing;

                showScreen('screen-reading-paid');
            }
        }

        // ===== User Horoscope State =====
        let userHoroscope = {
            western: '',
            chinese: '',
            element: '',
            planet: ''
        };

        // ===== Wish Suggestions =====
        const wishPool = [
            "I seek clarity about my career path",
            "I want guidance in matters of love",
            "I wish to understand my finances",
            "I need direction on a big decision",
            "I seek peace about my health",
            "I want to improve relationships"
        ];

        function generateWishSuggestions() {
            const container = document.getElementById('wish-suggestions');
            container.innerHTML = '';

            const shuffled = [...wishPool].sort(() => 0.5 - Math.random());
            const selected = shuffled.slice(0, 3);

            selected.forEach(wish => {
                const chip = document.createElement('span');
                chip.className = 'wish-chip';
                chip.textContent = wish.length > 25 ? wish.substring(0, 25) + '...' : wish;
                chip.onclick = () => {
                    document.getElementById('wish-input').value = wish;
                };
                container.appendChild(chip);
            });
        }

        // ===== Horoscope Calculation =====
        function calculateHoroscopes() {
            const input = document.getElementById('birthday-input').value;
            if (!input) return;

            const date = new Date(input);
            const month = date.getMonth() + 1;
            const day = date.getDate();
            const year = date.getFullYear();

            // Western Zodiac
            const western = getWesternZodiac(month, day);
            userHoroscope.western = western.sign;
            userHoroscope.element = western.element;
            userHoroscope.planet = western.planet;

            // Chinese Zodiac
            userHoroscope.chinese = getYearAnimal(year);

            // Update display
            document.getElementById('western-zodiac').textContent = userHoroscope.western;
            document.getElementById('chinese-zodiac').textContent = userHoroscope.chinese;
            document.getElementById('element').textContent = userHoroscope.element;

            // Show the horoscope display
            document.getElementById('horoscope-display').classList.remove('hidden');

            // Save to localStorage for personal section
            const userData = getUserData();
            userData.chineseZodiac = userHoroscope.chinese;
            userData.westernZodiac = userHoroscope.western;
            userData.birthday = input;
            saveUserData(userData);
        }

        function getWesternZodiac(month, day) {
            const signs = [
                { sign: 'Capricorn', element: 'Earth', planet: 'Saturn', start: [1, 1], end: [1, 19] },
                { sign: 'Aquarius', element: 'Air', planet: 'Uranus', start: [1, 20], end: [2, 18] },
                { sign: 'Pisces', element: 'Water', planet: 'Neptune', start: [2, 19], end: [3, 20] },
                { sign: 'Aries', element: 'Fire', planet: 'Mars', start: [3, 21], end: [4, 19] },
                { sign: 'Taurus', element: 'Earth', planet: 'Venus', start: [4, 20], end: [5, 20] },
                { sign: 'Gemini', element: 'Air', planet: 'Mercury', start: [5, 21], end: [6, 20] },
                { sign: 'Cancer', element: 'Water', planet: 'Moon', start: [6, 21], end: [7, 22] },
                { sign: 'Leo', element: 'Fire', planet: 'Sun', start: [7, 23], end: [8, 22] },
                { sign: 'Virgo', element: 'Earth', planet: 'Mercury', start: [8, 23], end: [9, 22] },
                { sign: 'Libra', element: 'Air', planet: 'Venus', start: [9, 23], end: [10, 22] },
                { sign: 'Scorpio', element: 'Water', planet: 'Pluto', start: [10, 23], end: [11, 21] },
                { sign: 'Sagittarius', element: 'Fire', planet: 'Jupiter', start: [11, 22], end: [12, 21] },
                { sign: 'Capricorn', element: 'Earth', planet: 'Saturn', start: [12, 22], end: [12, 31] }
            ];

            for (const zodiac of signs) {
                const [startMonth, startDay] = zodiac.start;
                const [endMonth, endDay] = zodiac.end;

                if (month === startMonth && day >= startDay) return zodiac;
                if (month === endMonth && day <= endDay) return zodiac;
            }

            return signs[0];
        }

        // ===== Generate Zodiac Insight =====
        function generateZodiacInsight(horoscope, category) {
            const yearAnimal = getYearAnimal(new Date().getFullYear());
            const insights = {
                'Career': [
                    `As a ${horoscope.chinese} in the Year of the ${yearAnimal}, your natural leadership qualities are amplified. This is a time for strategic moves.`,
                    `Your ${horoscope.element} nature combined with ${horoscope.chinese} energy suggests patience will bring greater rewards than haste.`,
                    `The ${yearAnimal} year favors those with ${horoscope.chinese} qualities. Trust your instincts in professional matters.`
                ],
                'Love': [
                    `${horoscope.chinese} hearts are especially magnetic this ${yearAnimal} year. Open yourself to unexpected connections.`,
                    `Your ${horoscope.western} Sun brings depth to relationships. The ${yearAnimal} energy amplifies emotional wisdom.`,
                    `As a ${horoscope.element} sign ${horoscope.chinese}, your approach to love benefits from grounding and patience.`
                ],
                'Wealth': [
                    `The ${yearAnimal} year brings financial opportunities for ${horoscope.chinese} signs who remain vigilant.`,
                    `Your ${horoscope.element} nature grounds your ${horoscope.chinese} energy, favoring steady wealth building over speculation.`,
                    `${horoscope.chinese} intuition combined with ${horoscope.western} practicality creates powerful financial insight.`
                ],
                'Health': [
                    `${horoscope.chinese} vitality is enhanced during the ${yearAnimal} year. Honor your body's natural rhythms.`,
                    `Your ${horoscope.element} constitution benefits from balance. The ${horoscope.chinese} in you seeks movement and freedom.`,
                    `As a ${horoscope.western} with ${horoscope.chinese} energy, prioritize rest as much as activity.`
                ],
                'Growth': [
                    `The ${yearAnimal} year challenges ${horoscope.chinese} signs to evolve. Embrace the discomfort of expansion.`,
                    `Your ${horoscope.element} foundation supports the ${horoscope.chinese} desire for transformation.`,
                    `${horoscope.western} wisdom meets ${horoscope.chinese} intuition‚Äîtrust this powerful combination.`
                ],
                'Creativity': [
                    `${horoscope.chinese} creative fire burns bright in the ${yearAnimal} year. Express what has been dormant.`,
                    `Your ${horoscope.element} nature channels ${horoscope.chinese} inspiration into tangible form.`,
                    `As a ${horoscope.western}, your creative vision is enhanced by ${horoscope.chinese} spontaneity.`
                ],
                'Family': [
                    `${horoscope.chinese} loyalty and ${horoscope.western} wisdom guide family harmony this ${yearAnimal} year.`,
                    `Your ${horoscope.element} nature brings stability to ${horoscope.chinese} family dynamics.`,
                    `The ${yearAnimal} year invites ${horoscope.chinese} signs to heal ancestral patterns.`
                ]
            };

            const categoryInsights = insights[category] || insights['Growth'];
            return categoryInsights[Math.floor(Math.random() * categoryInsights.length)];
        }

        // ===== Zodiac Timing =====
        function getZodiacTiming(chineseZodiac) {
            const timings = {
                'Rat': 'Late night (11pm-1am)',
                'Ox': 'Early morning (1am-3am)',
                'Tiger': 'Dawn (3am-5am)',
                'Rabbit': 'Sunrise (5am-7am)',
                'Dragon': 'Morning (7am-9am)',
                'Snake': 'Mid-morning (9am-11am)',
                'Horse': 'Midday (11am-1pm)',
                'Goat': 'Early afternoon (1pm-3pm)',
                'Monkey': 'Afternoon (3pm-5pm)',
                'Rooster': 'Evening (5pm-7pm)',
                'Dog': 'Dusk (7pm-9pm)',
                'Pig': 'Night (9pm-11pm)'
            };
            return timings[chineseZodiac] || 'Morning hours';
        }

        // ===== Confirm Offering & Generate Paid Cards =====
        function confirmOffering() {
            generatePaidCards();
            showScreen('screen-cards-paid');
        }

        function generatePaidCards() {
            const container = document.getElementById('paid-cards-grid');
            container.innerHTML = '';

            const patterns = ['pattern-1', 'pattern-2', 'pattern-3', 'pattern-4', 'pattern-5'];

            for (let i = 0; i < 30; i++) {
                const card = document.createElement('div');
                card.className = 'fortune-card ' + patterns[i % 5];
                card.onclick = () => selectCard('paid');
                container.appendChild(card);
            }
        }

        // ===== Modal Functions =====
        function openModal(name) {
            document.getElementById('modal-' + name).classList.add('active');
        }

        function closeModal(name) {
            document.getElementById('modal-' + name).classList.remove('active');
        }

        function closeModalOnOverlay(event) {
            if (event.target.classList.contains('modal-overlay')) {
                event.target.classList.remove('active');
            }
        }

        // ===== Initialize =====
        document.addEventListener('DOMContentLoaded', function() {
            renderDailyCalendar();
            checkDailyState();
        });
    </script>
</body>
</html>
